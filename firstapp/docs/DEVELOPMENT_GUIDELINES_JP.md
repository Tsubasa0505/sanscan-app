# 開発ガイドライン

*オリジナル: https://www.dzombak.com/blog/2025/08/getting-good-results-from-claude-code/*

## 開発哲学

### 核となる信念

- **大規模な変更より段階的な進歩を重視** 
  - コンパイルが通り、テストが成功する小さな変更を積み重ねる
  
- **既存コードから学ぶ** 
  - 実装前に既存のコードを調査し、計画を立てる
  
- **教条主義より実用主義** 
  - プロジェクトの現実に適応する
  
- **巧妙なコードより明確な意図** 
  - 退屈で明白なコードを選ぶ

### シンプルさとは

- 関数/クラスごとに単一の責任を持たせる
- 早すぎる抽象化を避ける
- 巧妙なトリックは使わない - 退屈な解決策を選ぶ
- 説明が必要なら、それは複雑すぎる

## 開発プロセス

### 1. 計画とステージング

複雑な作業を3〜5段階に分割し、`IMPLEMENTATION_PLAN.md`に文書化する：

```md
## ステージ N: [名前]
**目標**: [具体的な成果物]
**成功基準**: [テスト可能な成果]
**テスト**: [具体的なテストケース]
**ステータス**: [未着手|進行中|完了]
```

- 進捗に応じてステータスを更新
- すべてのステージが完了したらファイルを削除

### 2. 実装フロー

1. **理解する** - コードベースの既存パターンを調査
2. **テストを書く** - まずテストを書く（レッド）
3. **実装する** - テストが通る最小限のコード（グリーン）
4. **リファクタリング** - テストが通った状態でクリーンアップ
5. **コミット** - 計画にリンクした明確なメッセージでコミット

### 3. 行き詰まった時（3回試した後）

**重要**: 問題ごとに最大3回試行し、その後は停止する。

1. **失敗したことを文書化**：
   - 何を試したか
   - 具体的なエラーメッセージ
   - なぜ失敗したと思うか

2. **代替案を調査**：
   - 2〜3個の類似実装を見つける
   - 使用されている異なるアプローチを記録

3. **基本的な前提を疑う**：
   - これは適切な抽象化レベルか？
   - より小さな問題に分割できるか？
   - より単純なアプローチはないか？

4. **異なる角度から試す**：
   - 異なるライブラリ/フレームワークの機能を使えるか？
   - 問題を回避する別の設計パターンはないか？
   - ユーザーの要求を別の方法で満たせないか？

---

## 実践的な適用例

### コードレビューのチェックリスト
- [ ] 単一責任の原則が守られているか
- [ ] 不要な抽象化がないか
- [ ] コードの意図が明確か
- [ ] テストが先に書かれているか

### トラブルシューティングの記録テンプレート

```md
## 問題: [問題の簡潔な説明]

### 試行1
- **アプローチ**: 
- **結果**: 
- **エラー**: 

### 試行2
- **アプローチ**: 
- **結果**: 
- **エラー**: 

### 試行3
- **アプローチ**: 
- **結果**: 
- **エラー**: 

### 根本原因の分析
- **推測される原因**: 
- **代替アプローチ**: 
- **次のステップ**: 
```

## まとめ

このガイドラインは、Claude AIを使用した開発において、より良い結果を得るためのベストプラクティスです。重要なのは：

1. **小さく始める** - 大きな変更を避け、段階的に進める
2. **既存から学ぶ** - コードベースのパターンを理解してから実装
3. **シンプルに保つ** - 複雑な解決策より単純な解決策を選ぶ
4. **諦め時を知る** - 3回試してダメなら、アプローチを見直す

これらの原則に従うことで、保守性が高く、理解しやすいコードを書くことができます。