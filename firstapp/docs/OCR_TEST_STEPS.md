# OCR機能テスト実行手順

## 🔍 今すぐテストする手順

### ステップ1: テスト用名刺を開く
ブラウザで以下のURLを開いてください：
```
http://localhost:3010/test-business-card.html
```

紫色のグラデーション背景の名刺が表示されます：
- 名前: 山田 太郎
- 役職: 営業部 部長
- 会社: 株式会社テストカンパニー
- 住所: 〒100-0001 東京都千代田区千代田1-1-1
- 電話: 03-1234-5678
- Email: yamada@testcompany.co.jp

### ステップ2: スクリーンショットを撮る
名刺部分のスクリーンショットを撮影：

**Windows:**
1. `Win + Shift + S` を押す
2. 名刺部分を選択
3. クリップボードに保存される

**Mac:**
1. `Cmd + Shift + 4` を押す
2. 名刺部分を選択
3. デスクトップに保存される

### ステップ3: 連絡先ページでOCR実行

1. **連絡先ページを開く**
   ```
   http://localhost:3010/contacts
   ```

2. **新規追加モーダルを開く**
   - 画面右上の紫色の「+ 新規追加」ボタンをクリック

3. **名刺画像をアップロード**
   - モーダル上部の「📷 名刺画像をアップロード」エリアをクリック
   - 先ほど撮影したスクリーンショットを選択

4. **OCR処理を待つ**
   - 「処理中... 名刺情報を読み取っています」と表示される
   - 3-5秒待つ

### ステップ4: 結果を確認

OCR成功時：
- ✅ フォームに以下が自動入力される：
  - 名前: 山田 太郎
  - メール: yamada@testcompany.co.jp
  - 電話: 03-1234-5678
  - 会社: 株式会社テストカンパニー
  - 役職: 営業部 部長

エラー時：
- ❌ エラーメッセージが表示される
- 開発者ツール（F12）のConsoleでエラー詳細を確認

## 🛠️ デバッグ方法

### 開発者ツールで確認（F12キー）

**Consoleタブ:**
```javascript
// 正常時のログ
"OCR POST request received"
"Processing file: screenshot.png, size: 12345, type: image/png"
"Starting OCR with Google Cloud Vision API..."
"=== Parse Result ==="
{fullName: "山田 太郎", email: "yamada@testcompany.co.jp", ...}
```

**Networkタブ:**
1. `ocr/upload` リクエストを探す
2. StatusCode: 200（成功）または 400/500（エラー）
3. Responseタブで詳細確認

## ⚠️ よくある問題と対処法

### 1. 「FormData解析エラー」が出る
- 原因: 画像ファイルが正しく送信されていない
- 対処: 別の画像形式（JPEGなど）で試す

### 2. 「Google Cloud Vision APIエラー」が出る
- 原因: APIキーの問題またはクォータ超過
- 対処: 
  - `.env`のAPIキーを確認
  - Google Cloud Consoleでクォータ確認

### 3. フォームに何も入力されない
- 原因: OCR結果のパース失敗
- 対処: 
  - より鮮明な画像で再試行
  - 文字が読みやすい角度で撮影

### 4. 文字化けする
- 原因: 文字エンコーディングの問題
- 対処: UTF-8設定を確認

## 📊 テスト結果記録

| 項目 | 期待値 | 実際の結果 | OK/NG |
|------|--------|------------|-------|
| 名前 | 山田 太郎 |  |  |
| メール | yamada@testcompany.co.jp |  |  |
| 電話 | 03-1234-5678 |  |  |
| 会社 | 株式会社テストカンパニー |  |  |
| 役職 | 営業部 部長 |  |  |

## 次のステップ

テスト成功後：
1. 実際の名刺でもテスト
2. 英語の名刺でテスト
3. 縦書きの名刺でテスト
4. 複数人の名刺を連続処理

問題があった場合：
1. エラーログを確認
2. APIキー設定を再確認
3. 画像形式を変更して再試行