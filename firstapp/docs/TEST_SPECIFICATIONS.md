# SanScan テスト仕様書

## 📋 テスト概要

SanScan（名刺・連絡先管理システム）の機能テスト仕様書です。
本文書は、アプリケーションの品質保証とリリース前の検証項目を定義します。

---

## 🏠 1. ホームページ機能テスト

### 1.1 基本表示テスト
- [ ] **TC-HP-001**: ページが正常に読み込まれること
- [ ] **TC-HP-002**: SanScanロゴとタイトルが表示されること
- [ ] **TC-HP-003**: ダークモード切り替えボタンが機能すること
- [ ] **TC-HP-004**: ダークモード設定がローカルストレージに保存されること

### 1.2 ナビゲーションテスト
- [ ] **TC-HP-005**: 「連絡先管理を開始」リンクが `/contacts` に遷移すること
- [ ] **TC-HP-006**: 「ダッシュボードを見る」リンクが `/dashboard` に遷移すること

### 1.3 レスポンシブデザインテスト
- [ ] **TC-HP-007**: モバイル（375px）で正常に表示されること
- [ ] **TC-HP-008**: タブレット（768px）で正常に表示されること
- [ ] **TC-HP-009**: デスクトップ（1024px以上）で正常に表示されること

### 1.4 アニメーションテスト
- [ ] **TC-HP-010**: ページロード時のフェードインアニメーションが動作すること
- [ ] **TC-HP-011**: 機能カードのスタガードアニメーションが動作すること
- [ ] **TC-HP-012**: ホバーエフェクトが適切に動作すること

---

## 📇 2. 連絡先管理機能テスト

### 2.1 連絡先一覧表示テスト
- [ ] **TC-CL-001**: 連絡先一覧が正常に表示されること
- [ ] **TC-CL-002**: ページネーションが正常に動作すること
- [ ] **TC-CL-003**: デスクトップでテーブル形式で表示されること
- [ ] **TC-CL-004**: モバイルでカード形式で表示されること
- [ ] **TC-CL-005**: プロフィール画像がない場合、イニシャルアイコンが表示されること

### 2.2 連絡先作成テスト
- [ ] **TC-CC-001**: 新規連絡先フォームが正常に表示されること
- [ ] **TC-CC-002**: 必須項目（氏名）のバリデーションが動作すること
- [ ] **TC-CC-003**: メールアドレス形式のバリデーションが動作すること
- [ ] **TC-CC-004**: 電話番号形式のバリデーションが動作すること
- [ ] **TC-CC-005**: 連絡先が正常に保存されること
- [ ] **TC-CC-006**: 保存後に一覧に反映されること

### 2.3 連絡先編集テスト
- [ ] **TC-CE-001**: 編集フォームに既存データが正しく表示されること
- [ ] **TC-CE-002**: 変更内容が正常に保存されること
- [ ] **TC-CE-003**: キャンセルボタンで変更が破棄されること
- [ ] **TC-CE-004**: 編集後に詳細画面に反映されること

### 2.4 連絡先削除テスト
- [ ] **TC-CD-001**: 削除確認ダイアログが表示されること
- [ ] **TC-CD-002**: 削除を実行すると連絡先が削除されること
- [ ] **TC-CD-003**: キャンセルで削除が中止されること
- [ ] **TC-CD-004**: 削除後に一覧から除外されること

---

## 🔍 3. 検索・フィルタ機能テスト

### 3.1 基本検索テスト
- [ ] **TC-BS-001**: 氏名による検索が正常に動作すること
- [ ] **TC-BS-002**: 会社名による検索が正常に動作すること
- [ ] **TC-BS-003**: メールアドレスによる検索が正常に動作すること
- [ ] **TC-BS-004**: 部分一致検索が動作すること
- [ ] **TC-BS-005**: 検索結果件数が正しく表示されること

### 3.2 高度な検索テスト
- [ ] **TC-AS-001**: 電話番号ありフィルタが動作すること
- [ ] **TC-AS-002**: メールアドレスありフィルタが動作すること
- [ ] **TC-AS-003**: メモありフィルタが動作すること
- [ ] **TC-AS-004**: 名刺画像ありフィルタが動作すること
- [ ] **TC-AS-005**: 複数フィルタの組み合わせが動作すること
- [ ] **TC-AS-006**: フィルタリセット機能が動作すること
- [ ] **TC-AS-007**: フィルタ適用中バッジが表示されること

### 3.3 ソート機能テスト
- [ ] **TC-SO-001**: 登録日順ソートが動作すること
- [ ] **TC-SO-002**: 氏名順ソートが動作すること
- [ ] **TC-SO-003**: 会社名順ソートが動作すること
- [ ] **TC-SO-004**: 昇順・降順の切り替えが動作すること

---

## 📱 4. OCR機能テスト

### 4.1 OCR基本機能テスト
- [ ] **TC-OCR-001**: 名刺画像アップロード画面が表示されること
- [ ] **TC-OCR-002**: 画像ファイル（jpg, png）がアップロードできること
- [ ] **TC-OCR-003**: 対応外ファイル形式でエラーが表示されること
- [ ] **TC-OCR-004**: OCR処理が正常に実行されること
- [ ] **TC-OCR-005**: OCR結果が連絡先として保存されること

### 4.2 OCR精度テスト
- [ ] **TC-OCR-006**: 日本語名刺の氏名が正しく抽出されること
- [ ] **TC-OCR-007**: 英語名刺の氏名が正しく抽出されること
- [ ] **TC-OCR-008**: メールアドレスが正しく抽出されること
- [ ] **TC-OCR-009**: 電話番号が正しく抽出されること
- [ ] **TC-OCR-010**: 会社名が正しく抽出されること
- [ ] **TC-OCR-011**: 役職が正しく抽出されること

### 4.3 OCR画像保存テスト
- [ ] **TC-OCR-012**: 名刺画像が正しいパスに保存されること
- [ ] **TC-OCR-013**: 保存された画像にアクセスできること
- [ ] **TC-OCR-014**: 画像のアスペクト比が保持されること
- [ ] **TC-OCR-015**: 複数の画像が同時処理された場合も正常に保存されること

### 4.4 OCRエラーハンドリングテスト
- [ ] **TC-OCR-016**: API キー未設定時にデモモードで動作すること
- [ ] **TC-OCR-017**: 無効な API キーでエラーが表示されること
- [ ] **TC-OCR-018**: ネットワークエラー時に適切なエラーが表示されること
- [ ] **TC-OCR-019**: テキストが検出されない画像で適切なエラーが表示されること

---

## 📧 5. メール機能テスト

### 5.1 個別メール送信テスト
- [ ] **TC-EM-001**: メール送信フォームが正常に表示されること
- [ ] **TC-EM-002**: 宛先が自動入力されること
- [ ] **TC-EM-003**: 件名・本文が必須項目として検証されること
- [ ] **TC-EM-004**: メールが正常に送信されること
- [ ] **TC-EM-005**: 送信履歴が連絡先に記録されること

### 5.2 一括メール送信テスト
- [ ] **TC-BEM-001**: 複数連絡先を選択できること
- [ ] **TC-BEM-002**: 全選択機能が動作すること
- [ ] **TC-BEM-003**: 選択された連絡先に一括送信されること
- [ ] **TC-BEM-004**: メールアドレスがない連絡先がスキップされること
- [ ] **TC-BEM-005**: 送信結果が正しく表示されること
- [ ] **TC-BEM-006**: テンプレート変数が正しく置換されること

### 5.3 メール設定テスト
- [ ] **TC-EMS-001**: メール設定未完了時に適切なエラーが表示されること
- [ ] **TC-EMS-002**: 設定手順が表示されること
- [ ] **TC-EMS-003**: SMTP接続エラーが適切に処理されること

---

## 👤 6. 連絡先詳細機能テスト

### 6.1 詳細表示テスト
- [ ] **TC-CD-001**: 連絡先詳細が正しく表示されること
- [ ] **TC-CD-002**: プロフィール画像が表示されること
- [ ] **TC-CD-003**: 名刺画像が表示されること
- [ ] **TC-CD-004**: 会社・役職情報が表示されること
- [ ] **TC-CD-005**: 連絡先情報（メール・電話）が表示されること

### 6.2 編集機能テスト
- [ ] **TC-CDE-001**: インライン編集が動作すること
- [ ] **TC-CDE-002**: 重要度設定が保存されること
- [ ] **TC-CDE-003**: タグ設定が保存されること
- [ ] **TC-CDE-004**: メモ編集が保存されること

### 6.3 履歴機能テスト
- [ ] **TC-CDH-001**: 連絡履歴一覧が表示されること
- [ ] **TC-CDH-002**: 新しい履歴を追加できること
- [ ] **TC-CDH-003**: 履歴タイプ（メール・電話・面談）が設定できること
- [ ] **TC-CDH-004**: 履歴が時系列で表示されること

### 6.4 統計機能テスト
- [ ] **TC-CDS-001**: 登録からの日数が正しく表示されること
- [ ] **TC-CDS-002**: 最終連絡からの日数が正しく表示されること
- [ ] **TC-CDS-003**: 紹介人数が正しく表示されること
- [ ] **TC-CDS-004**: 連絡履歴数が正しく表示されること

---

## 📤 7. データ管理機能テスト

### 7.1 画像アップロードテスト
- [ ] **TC-IU-001**: プロフィール画像のアップロードが動作すること
- [ ] **TC-IU-002**: 名刺画像のアップロードが動作すること
- [ ] **TC-IU-003**: アップロード後にプレビューが表示されること
- [ ] **TC-IU-004**: 画像削除機能が動作すること
- [ ] **TC-IU-005**: ファイルサイズ制限が適用されること

### 7.2 データ検証テスト
- [ ] **TC-DV-001**: 不正なメールアドレス形式でエラーが表示されること
- [ ] **TC-DV-002**: 不正な電話番号形式でエラーが表示されること
- [ ] **TC-DV-003**: 必須項目未入力でエラーが表示されること
- [ ] **TC-DV-004**: 重複する連絡先の警告が表示されること（将来機能）

---

## 🎨 8. UI/UX機能テスト

### 8.1 ダークモードテスト
- [ ] **TC-DM-001**: ダークモード切り替えが全ページで動作すること
- [ ] **TC-DM-002**: ダークモード設定が保持されること
- [ ] **TC-DM-003**: 両モードで十分なコントラストが確保されること
- [ ] **TC-DM-004**: アイコンや画像が両モードで視認可能であること

### 8.2 アニメーション・インタラクションテスト
- [ ] **TC-AI-001**: ホバーエフェクトが適切に動作すること
- [ ] **TC-AI-002**: ローディングアニメーションが表示されること
- [ ] **TC-AI-003**: トランジション効果が滑らかであること
- [ ] **TC-AI-004**: アニメーションがパフォーマンスに悪影響しないこと

### 8.3 レスポンシブデザインテスト
- [ ] **TC-RD-001**: モバイル（320px-768px）で適切に表示されること
- [ ] **TC-RD-002**: タブレット（768px-1024px）で適切に表示されること
- [ ] **TC-RD-003**: デスクトップ（1024px以上）で適切に表示されること
- [ ] **TC-RD-004**: 画面回転時に適切にレイアウトされること

---

## ♿ 9. アクセシビリティテスト

### 9.1 キーボードナビゲーションテスト
- [ ] **TC-KB-001**: Tabキーで全ての操作可能要素に移動できること
- [ ] **TC-KB-002**: Enterキーでボタン操作ができること
- [ ] **TC-KB-003**: Escapeキーでモーダルが閉じること
- [ ] **TC-KB-004**: フォーカス表示が明確であること

### 9.2 スクリーンリーダー対応テスト
- [ ] **TC-SR-001**: 適切なaria-labelが設定されていること
- [ ] **TC-SR-002**: 見出し構造が論理的であること
- [ ] **TC-SR-003**: 画像にalt属性が設定されていること
- [ ] **TC-SR-004**: フォーム要素にラベルが関連付けられていること

---

## 🔒 10. セキュリティ・プライバシーテスト

### 10.1 データ保護テスト
- [ ] **TC-DP-001**: APIキーがクライアントサイドに露出していないこと
- [ ] **TC-DP-002**: 画像ファイルが適切なディレクトリに保存されること
- [ ] **TC-DP-003**: ファイルアップロードで悪意あるファイルが拒否されること
- [ ] **TC-DP-004**: SQLインジェクション攻撃が防がれること

### 10.2 入力検証テスト
- [ ] **TC-IV-001**: XSS攻撃が防がれること
- [ ] **TC-IV-002**: 異常に長い入力が適切に処理されること
- [ ] **TC-IV-003**: 特殊文字入力が適切に処理されること
- [ ] **TC-IV-004**: ファイルアップロードサイズ制限が適用されること

---

## 🚀 11. パフォーマンステスト

### 11.1 ページ読み込み性能テスト
- [ ] **TC-PP-001**: ページ初期読み込みが3秒以内であること
- [ ] **TC-PP-002**: 画像読み込みが適切に最適化されていること
- [ ] **TC-PP-003**: JavaScript・CSSが最小化されていること
- [ ] **TC-PP-004**: 不要なネットワークリクエストがないこと

### 11.2 大量データ処理テスト
- [ ] **TC-BD-001**: 1000件の連絡先でも正常に動作すること
- [ ] **TC-BD-002**: 検索・フィルタが高速に動作すること
- [ ] **TC-BD-003**: ページネーションが適切に動作すること
- [ ] **TC-BD-004**: メモリリークが発生しないこと

---

## 🌐 12. ブラウザ互換性テスト

### 12.1 主要ブラウザテスト
- [ ] **TC-BC-001**: Chrome（最新版）で正常に動作すること
- [ ] **TC-BC-002**: Firefox（最新版）で正常に動作すること
- [ ] **TC-BC-003**: Safari（最新版）で正常に動作すること
- [ ] **TC-BC-004**: Edge（最新版）で正常に動作すること

### 12.2 モバイルブラウザテスト
- [ ] **TC-MB-001**: iOS Safari で正常に動作すること
- [ ] **TC-MB-002**: Android Chrome で正常に動作すること
- [ ] **TC-MB-003**: タッチ操作が適切に動作すること
- [ ] **TC-MB-004**: プルトゥリフレッシュが適切に処理されること

---

## 📊 13. 統合テスト

### 13.1 エンドツーエンドテスト
- [ ] **TC-E2E-001**: 名刺OCR → 連絡先登録 → 編集 → メール送信の一連の流れが動作すること
- [ ] **TC-E2E-002**: 複数ユーザーでの同時使用で競合が発生しないこと
- [ ] **TC-E2E-003**: 長時間使用でセッション切れが適切に処理されること
- [ ] **TC-E2E-004**: ブラウザリロード後も状態が保持されること

---

## 📝 テスト実行手順

### 事前準備
1. テスト環境のセットアップ
2. テストデータの準備
3. ブラウザ・デバイスの準備
4. APIキー等の設定

### テスト実行
1. 各機能別にテストケースを実行
2. 問題を発見した場合は詳細な再現手順を記録
3. スクリーンショット・動画で証跡を保存
4. 重要度に応じて修正優先度を設定

### テスト完了基準
- 全重要機能テストケースの合格
- 既知の問題が文書化されている
- パフォーマンス要件を満たしている
- セキュリティ要件を満たしている

---

## 🔍 品質メトリクス

### カバレッジ目標
- **機能カバレッジ**: 95%以上
- **ブラウザカバレッジ**: 主要4ブラウザ100%
- **デバイスカバレッジ**: モバイル・タブレット・デスクトップ100%
- **エラーケースカバレッジ**: 80%以上

### パフォーマンス基準
- **ページ読み込み時間**: 3秒以内
- **API応答時間**: 1秒以内
- **OCR処理時間**: 10秒以内
- **メモリ使用量**: 100MB以内

---

*📅 最終更新日: 2025年1月20日*
*✏️ 作成者: Claude Code Assistant*
*📋 バージョン: 1.0*