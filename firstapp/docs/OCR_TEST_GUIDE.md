# OCR機能テストガイド

## テスト手順

### 1. テスト用名刺の準備

#### 方法A: HTMLテスト名刺を使用
1. ブラウザで http://localhost:3010/test-business-card.html を開く
2. 表示された名刺をスクリーンショット撮影
   - Windows: `Win + Shift + S`
   - Mac: `Cmd + Shift + 4`

#### 方法B: 実際の名刺を使用
- スマートフォンで名刺を撮影
- またはスキャナーでスキャン

### 2. OCR機能のテスト

1. **連絡先ページを開く**
   ```
   http://localhost:3010/contacts
   ```

2. **新規追加ボタンをクリック**
   - 右上の「➕ 新規追加」ボタンをクリック

3. **名刺画像をアップロード**
   - 「📷 名刺画像をアップロード」エリアをクリック
   - 準備した名刺画像を選択

4. **OCR処理の確認**
   - 「処理中... 名刺情報を読み取っています」が表示される
   - 数秒待つ

5. **結果の確認**
   - フォームに自動入力された情報を確認：
     - 名前
     - メールアドレス
     - 電話番号
     - 会社名
     - 役職

### 3. 期待される結果

テスト名刺の場合、以下が自動入力されるはず：
- **名前**: 山田 太郎
- **メール**: yamada@testcompany.co.jp
- **電話**: 03-1234-5678
- **会社**: 株式会社テストカンパニー
- **役職**: 営業部 部長

### 4. トラブルシューティング

#### エラー: "Google Cloud Vision APIキーが設定されていません"
- `.env`ファイルに`GOOGLE_CLOUD_VISION_API_KEY`が設定されているか確認

#### エラー: "FormData解析エラー"
- 画像ファイル形式を確認（JPEG, PNG推奨）
- ファイルサイズが大きすぎないか確認（10MB以下推奨）

#### OCR精度が低い場合
- 画像が鮮明か確認
- 文字が読みやすいか確認
- 傾きがないか確認

### 5. デバッグ情報の確認

開発者ツールのConsoleタブで以下を確認：
```javascript
// OCR処理のログ
"OCR POST request received"
"Processing file: [filename]"
"Starting OCR with Google Cloud Vision API..."
"=== Parse Result ==="
```

### 6. APIレスポンスの確認

開発者ツールのNetworkタブで：
1. `/api/ocr/upload`リクエストを確認
2. Responseタブで返却されたJSONを確認
3. 正常時は`contact`オブジェクトが含まれる

## テスト項目チェックリスト

- [ ] 名刺画像のアップロードができる
- [ ] OCR処理中の表示が出る
- [ ] フォームに情報が自動入力される
- [ ] 日本語の名前が正しく認識される
- [ ] メールアドレスが正しく認識される
- [ ] 電話番号が正しく認識される
- [ ] 会社名が正しく認識される
- [ ] 役職・部署が正しく認識される
- [ ] エラー時に適切なメッセージが表示される
- [ ] 処理完了後、連絡先一覧が更新される

## 注意事項

1. **APIキーの制限**
   - Google Cloud Vision APIは月1000リクエストまで無料
   - 制限を超えると課金される可能性あり

2. **プライバシー**
   - テスト時は架空の名刺データを使用推奨
   - 実際の個人情報を含む名刺は慎重に扱う

3. **画像の保存**
   - アップロードされた画像は`public/uploads`に保存される
   - 定期的にクリーンアップが必要